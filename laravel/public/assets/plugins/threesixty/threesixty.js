(function($){'use strict';$.ThreeSixty=function(el,options){var base=this,AppCongif,frames=[],VERSION='1.0.7';base.$el=$(el);base.el=el;base.$el.data('ThreeSixty',base);base.init=function(){AppCongif=$.extend({},$.ThreeSixty.defaultOptions,options);if(!AppCongif.parallel){base.loadImages();}if(AppCongif.disableSpin){AppCongif.currentFrame=1;AppCongif.endFrame=1;}base.initProgress();};base.initProgress=function(){base.$el.css({width:AppCongif.width+'px',height:AppCongif.height+'px','background-image':'none !important'}).css(AppCongif.styles);if(AppCongif.responsive){base.$el.css({width:'100%'});}base.$el.find(AppCongif.progress).css({marginTop:((AppCongif.height/2)-15)+'px'});base.$el.find(AppCongif.progress).fadeIn('slow');base.$el.find(AppCongif.imgList).hide();};base.loadImages=function(){var li,imageName,image,host,baseIndex;li=document.createElement('li');baseIndex=AppCongif.zeroBased?0:1;imageName=!AppCongif.imgArray?AppCongif.domain+AppCongif.imagePath+AppCongif.filePrefix+base.zeroPad((AppCongif.loadedImages+baseIndex))+AppCongif.ext+((base.browser.isIE())?'?'+new Date().getTime():''):AppCongif.imgArray[AppCongif.loadedImages];image=$('<img>').attr('src',imageName).addClass('previous-image').appendTo(li);frames.push(image);base.$el.find(AppCongif.imgList).append(li);$(image).load(function(){base.imageLoaded();});};base.imageLoaded=function(){AppCongif.loadedImages+=1;$(AppCongif.progress+' span').text(Math.floor(AppCongif.loadedImages/AppCongif.totalFrames*100)+'%');if(AppCongif.loadedImages>=AppCongif.totalFrames){if(AppCongif.disableSpin){frames[0].removeClass('previous-image').addClass('current-image');}$(AppCongif.progress).fadeOut('slow',function(){$(this).hide();base.showImages();base.showNavigation();});}else{base.loadImages();}};base.showImages=function(){base.$el.find('.txtC').fadeIn();base.$el.find(AppCongif.imgList).fadeIn();base.ready=true;AppCongif.ready=true;if(AppCongif.drag){base.initEvents();}base.refresh();base.initPlugins();AppCongif.onReady();};base.initPlugins=function(){$.each(AppCongif.plugins,function(i,plugin){if(typeof $[plugin]==='function'){$[plugin].call(base,base.$el,AppCongif);}else{throw new Error(plugin+' not available.');}});};base.showNavigation=function(){if(AppCongif.navigation&&!AppCongif.navigation_init){var nav_bar,next,previous,play_stop;nav_bar=$('<div/>').attr('class','nav_bar');next=$('<a/>').attr({'href':'#','class':'nav_bar_next'}).html('next');previous=$('<a/>').attr({'href':'#','class':'nav_bar_previous'}).html('previous');play_stop=$('<a/>').attr({'href':'#','class':'nav_bar_play'}).html('play');nav_bar.append(previous);nav_bar.append(play_stop);nav_bar.append(next);base.$el.prepend(nav_bar);next.bind('mousedown touchstart',base.next);previous.bind('mousedown touchstart',base.previous);play_stop.bind('mousedown touchstart',base.play_stop);AppCongif.navigation_init=true;}};base.play_stop=function(event){event.preventDefault();if(!AppCongif.autoplay){AppCongif.autoplay=true;AppCongif.play=setInterval(base.moveToNextFrame,40);$(event.currentTarget).removeClass('nav_bar_play').addClass('nav_bar_stop');}else{AppCongif.autoplay=false;$(event.currentTarget).removeClass('nav_bar_stop').addClass('nav_bar_play');clearInterval(AppCongif.play);AppCongif.play=null;}};base.next=function(event){if(event){event.preventDefault();}AppCongif.endFrame-=5;base.refresh();};base.previous=function(event){if(event){event.preventDefault();}AppCongif.endFrame+=5;base.refresh();};base.play=function(){if(!AppCongif.autoplay){AppCongif.autoplay=true;AppCongif.play=setInterval(base.moveToNextFrame,40);}};base.stop=function(){if(AppCongif.autoplay){AppCongif.autoplay=false;clearInterval(AppCongif.play);AppCongif.play=null;}};base.moveToNextFrame=function(){if(AppCongif.autoplayDirection===1){AppCongif.endFrame-=1;}else{AppCongif.endFrame+=1;}base.refresh();};base.gotoAndPlay=function(n){if(AppCongif.disableWrap){AppCongif.endFrame=n;base.refresh();}else{var multiplier=Math.ceil(AppCongif.endFrame/AppCongif.totalFrames);if(multiplier===0){multiplier=1;}var realEndFrame=(multiplier>1)?AppCongif.endFrame-((multiplier-1)*AppCongif.totalFrames):AppCongif.endFrame;var currentFromEnd=AppCongif.totalFrames-realEndFrame;var newEndFrame=0;if(n-realEndFrame>0){if(n-realEndFrame<realEndFrame+(AppCongif.totalFrames-n)){newEndFrame=AppCongif.endFrame+(n-realEndFrame);}else{newEndFrame=AppCongif.endFrame-(realEndFrame+(AppCongif.totalFrames-n));}}else{if(realEndFrame-n<currentFromEnd+n){newEndFrame=AppCongif.endFrame-(realEndFrame-n);}else{newEndFrame=AppCongif.endFrame+(currentFromEnd+n);}}if(realEndFrame!==n){AppCongif.endFrame=newEndFrame;base.refresh();}}};base.initEvents=function(){base.$el.bind('mousedown touchstart touchmove touchend mousemove click',function(event){event.preventDefault();if((event.type==='mousedown'&&event.which===1)||event.type==='touchstart'){AppCongif.pointerStartPosX=base.getPointerEvent(event).pageX;AppCongif.dragging=true;}else if(event.type==='touchmove'){base.trackPointer(event);}else if(event.type==='touchend'){AppCongif.dragging=false;}});$(document).bind('mouseup',function(event){AppCongif.dragging=false;$(this).css('cursor','none');});$(document).bind('mousemove',function(event){if(AppCongif.dragging){event.preventDefault();if(!base.browser.isIE&&AppCongif.showCursor){base.$el.css('cursor','url(assets/images/hand_closed.png), auto');}}else{if(!base.browser.isIE&&AppCongif.showCursor){base.$el.css('cursor','url(assets/images/hand_open.png), auto');}}base.trackPointer(event);});};base.getPointerEvent=function(event){return event.originalEvent.targetTouches?event.originalEvent.targetTouches[0]:event;};base.trackPointer=function(event){if(AppCongif.ready&&AppCongif.dragging){AppCongif.pointerEndPosX=base.getPointerEvent(event).pageX;if(AppCongif.monitorStartTime<new Date().getTime()-AppCongif.monitorInt){AppCongif.pointerDistance=AppCongif.pointerEndPosX-AppCongif.pointerStartPosX;if(AppCongif.pointerDistance>0){AppCongif.endFrame=AppCongif.currentFrame+Math.ceil((AppCongif.totalFrames-1)*AppCongif.speedMultiplier*(AppCongif.pointerDistance/base.$el.width()));}else{AppCongif.endFrame=AppCongif.currentFrame+Math.floor((AppCongif.totalFrames-1)*AppCongif.speedMultiplier*(AppCongif.pointerDistance/base.$el.width()));}if(AppCongif.disableWrap){AppCongif.endFrame=Math.min(AppCongif.totalFrames-(AppCongif.zeroBased?1:0),AppCongif.endFrame);AppCongif.endFrame=Math.max((AppCongif.zeroBased?0:1),AppCongif.endFrame);}base.refresh();AppCongif.monitorStartTime=new Date().getTime();AppCongif.pointerStartPosX=base.getPointerEvent(event).pageX;}}};base.refresh=function(){if(AppCongif.ticker===0){AppCongif.ticker=setInterval(base.render,Math.round(1000/AppCongif.framerate));}};base.render=function(){var frameEasing;if(AppCongif.currentFrame!==AppCongif.endFrame){frameEasing=AppCongif.endFrame<AppCongif.currentFrame?Math.floor((AppCongif.endFrame-AppCongif.currentFrame)*0.1):Math.ceil((AppCongif.endFrame-AppCongif.currentFrame)*0.1);base.hidePreviousFrame();AppCongif.currentFrame+=frameEasing;base.showCurrentFrame();base.$el.trigger('frameIndexChanged',[base.getNormalizedCurrentFrame(),AppCongif.totalFrames]);}else{window.clearInterval(AppCongif.ticker);AppCongif.ticker=0;}};base.hidePreviousFrame=function(){frames[base.getNormalizedCurrentFrame()].removeClass('current-image').addClass('previous-image');};base.showCurrentFrame=function(){frames[base.getNormalizedCurrentFrame()].removeClass('previous-image').addClass('current-image');};base.getNormalizedCurrentFrame=function(){var c,e;if(!AppCongif.disableWrap){c=Math.ceil(AppCongif.currentFrame%AppCongif.totalFrames);if(c<0){c+=(AppCongif.totalFrames-1);}}else{c=Math.min(AppCongif.currentFrame,AppCongif.totalFrames-(AppCongif.zeroBased?1:0));e=Math.min(AppCongif.endFrame,AppCongif.totalFrames-(AppCongif.zeroBased?1:0));c=Math.max(c,(AppCongif.zeroBased?0:1));e=Math.max(e,(AppCongif.zeroBased?0:1));AppCongif.currentFrame=c;AppCongif.endFrame=e;}return c;};base.zeroPad=function(num){function pad(number,length){var str=number.toString();if(AppCongif.zeroPadding){while(str.length<length){str='0'+str;}}return str;}var approximateLog=Math.log(AppCongif.totalFrames)/Math.LN10;var roundTo=1e3;var roundedLog=Math.round(approximateLog*roundTo)/roundTo;var numChars=Math.floor(roundedLog)+1;return pad(num,numChars);};base.browser={};base.browser.isIE=function(){var rv=-1;if(navigator.appName==='Microsoft Internet Explorer'){var ua=navigator.userAgent;var re=new RegExp('MSIE ([0-9]{1,}[\\.0-9]{0,})');if(re.exec(ua)!==null){rv=parseFloat(RegExp.$1);}}return rv!==-1;};base.init();};$.ThreeSixty.defaultOptions={dragging:false,ready:false,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:'',parallel:false,queueAmount:8,idle:0,filePrefix:'',ext:'png',height:300,width:300,styles:{},navigation:false,autoplay:false,autoplayDirection:1,disableSpin:false,disableWrap:false,responsive:false,zeroPadding:false,zeroBased:false,plugins:[],showCursor:false,drag:true,onReady:function(){}};$.fn.ThreeSixty=function(options){return Object.create(new $.ThreeSixty(this,options));};}(jQuery));if(typeof Object.create!=='function'){Object.create=function(o){'use strict';function F(){}F.prototype=o;return new F();};}